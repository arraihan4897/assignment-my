"use strict";(()=>{var de=Object.defineProperty;var s=(_,I)=>de(_,"name",{value:I,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["billing"],{23551:(_,I,d)=>{var h=d(13462),T=d.n(h),b=d(59753);(0,b.on)("submit",".js-braintree-encrypt",function({currentTarget:e}){const t=e.getAttribute("data-braintree-key");if(!t)throw new Error("Missing `data-braintree-key` attribute on element");window.Braintree.create(t).encryptForm(e)});var E=d(64463),q=d(7739);(0,b.on)("submit",".js-find-coupon-form",function(e){const t=e.target;if(!(t instanceof HTMLFormElement))return;const n=t.action,o=document.querySelector("#code");window.location.href=`${n}/${encodeURIComponent(o.value)}`,e.preventDefault()}),(0,b.on)("click",".js-choose-account",function(e){for(const o of document.querySelectorAll(".js-plan-row, .js-choose-plan"))o.classList.remove("selected");const t=document.querySelector(".js-plan");t.value="";for(const o of document.querySelectorAll(".js-billing-section"))o.classList.add("has-removed-contents");const n=e.currentTarget.closest(".js-account-row");if(n)if(n.getAttribute("data-org-data-collection-enabled")==="true"){const a=n.getAttribute("data-login");if(!a)return;const c=new URL(window.location.href,window.location.origin);let r="id";c.searchParams.get("org")?r="org":c.searchParams.get("organization_id")&&(r="organization_id"),c.searchParams.set(r,a),window.location.href=c.href}else P(n)}),(0,b.on)("click",".js-choose-plan",function(e){if(!(e.target instanceof Element))return;const t=e.target.closest(".js-plan-row");p(t)}),(0,E.N7)(".js-choose-plan-radio:checked",{add(e){p(e.closest(".js-plan-row"))}}),(0,E.N7)(".js-plan-row.selected",{add:M}),(0,E.N7)(".js-choose-account.selected",{add:M});function M(e){const t=e.closest("form");if(!t)return;const n=t.querySelector(".js-redeem-button");n instanceof HTMLButtonElement&&(n.disabled=e.classList.contains("free-plan"))}s(M,"enableNextButton");function P(e){const t=e.getAttribute("data-login"),n=e.getAttribute("data-plan");if(!t||!n)return;for(const C of document.querySelectorAll(".js-account-row, .js-choose-account"))C.classList.remove("selected");e.classList.add("selected");const o=e.querySelector(".js-choose-account");o&&o.classList.add("selected");const a=document.querySelector(".js-account");a&&(a.value=t);const c=document.querySelector(".js-plan-section");c&&(c.hidden=!1);for(const C of document.querySelectorAll(".js-billing-plans"))C.hidden=!0;const r=document.querySelector(`.js-billing-plans[data-login='${t}']`);if(!r)return;r.hidden=!1;const S=r.querySelectorAll(".js-plan-row"),v=S.length===1?S[0]:r.querySelector(`[data-name='${n}']`);v instanceof Element&&p(v)}s(P,"selectAccount");function A(e){const t=e.getAttribute("data-login"),n=e.getAttribute("data-plan");if(!t||!n)return;for(const r of document.querySelectorAll(".js-billing-plans"))r.hidden=!0;const o=document.querySelector(`.js-billing-plans[data-login='${t}']`);if(!o)return;o.hidden=!1;const a=o.querySelectorAll(".js-plan-row"),c=a.length===1?a[0]:o.querySelector(`[data-name='${n}']`);c instanceof Element&&p(c)}s(A,"selectPlanForDataCollection");function p(e){const t=e.getAttribute("data-name"),n=e.closest(".js-billing-plans");if(!n)return;const o=n.getAttribute("data-login");if(!o)return;const a=n.getAttribute("data-has-billing")==="true",c=parseInt(e.getAttribute("data-cost")||"",10);for(const w of document.querySelectorAll(".js-plan-row, .js-choose-plan"))w.classList.remove("selected");e.classList.add("selected");const r=e.querySelector(".js-choose-plan");r&&r.classList.add("selected");const S=e.querySelector(".js-choose-plan-radio");S instanceof HTMLInputElement&&(S.checked=!0);const v=document.querySelector(".js-plan");if(v&&(v.value=t||""),!document.querySelector(".js-coupons-data-collection-wrapper")){if(c===0||a){const w=document.querySelector(".js-billing-section");w&&w.classList.add("has-removed-contents")}else if(o){const w=document.querySelector(`.js-billing-section[data-login='${o}']`);w&&w.classList.remove("has-removed-contents")}}}s(p,"selectPlan"),async function(){await q.x;const e=document.querySelector(".js-account-row.selected");e&&P(e);const t=document.querySelector(".js-coupons-data-collection-wrapper");if(t)A(t);else{const n=document.querySelector(".js-plan-row.selected");n instanceof Element&&p(n)}}(),(0,b.on)("click",".js-enter-new-card",function(e){const t=e.currentTarget.closest(".js-zuora-existing-card"),n=document.querySelector(".js-billing-section"),o=document.querySelector(".js-enter-new-card");t.classList.add("d-none"),n.hidden=!1;const a=n.querySelector("iframe");a.setAttribute("width","100%");const c=o.getAttribute("data-sdn-data-collection")==="true"?"237":"677";a.setAttribute("height",c)}),(0,b.on)("click",".js-edit-card-details",function(e){const t=document.getElementById("zuora_payment"),n=e.currentTarget.closest(".js-zuora-billing-info"),o=document.querySelector(".js-billing-section");t.classList.toggle("d-none"),n.classList.toggle("d-none"),o.classList.remove("PaymentMethod--creditcard-added"),o.classList.add("PaymentMethod--creditcard")});const f={Australia:"AU00 000 000 000",Austria:"ATU000000000",Belgium:"BE0000000000",Bulgaria:"BG000000000",Croatia:"HR00000000000",Cyprus:"CY000000000X","Czech Republic":"CZ00000000...",Denmark:"DK00 00 00 00",Estonia:"EE000000000",Finland:"FI00000000",France:"FRXX 000000000",Germany:"DE000000000",Greece:"EL000000000",Hungary:"HU00000000",Iceland:"IS...",India:"IN00000000000",Ireland:"IE0000000XA",Italy:"IT00000000000",Japan:"000000000000",Latvia:"LV00000000000",Lithuania:"LT000000000...",Luxembourg:"LU00000000",Malta:"MT00000000",Netherlands:"NL000000000B00","New Zealand":"NZ0000000000000",Norway:"NO000000000MVA",Poland:"PL0000000000",Portugal:"PT000000000",Romania:"RO0000000000",Russia:"RU0000000000",Slovakia:"SK0000000000",Slovenia:"SI00000000",Spain:"ES...",Sweden:"SE000000000000",Switzerland:"CHE000000000TVA",Taiwan:"00000000","United Kingdom":"GB000000000"},j=["Angola","Antigua and Barbuda","Aruba","Bahamas","Belize","Benin","Botswana","Cameroon","Comoros","Congo (Brazzaville)","Congo (Kinshasa)","Cook Islands","C\xF4te d'Ivoire","Djibouti","Dominica","Fiji","French Southern Lands","Ghana","Guyana","Hong Kong","Ireland","Kiribati","Korea, North","Malawi","Maritania","Mauritius","Montserrat","Nauru","Niue","Qatar","Saint Kitts and Nevis","Saint Lucia","Sao Tome and Principe","Seychelles","Sierra Leone","Sint Maarten (Dutch part)","Solomon Islands","Somalia","Suriname","Syria","Togo","Tokelau","Tonga","United Arab Emirates","Vanuatu","Yemen","Zimbabwe"],R="United States of America",$="Canada";function B(e){let t;const n=e.options[e.selectedIndex];n&&(t=n.textContent);const o=t?f[t]:null,a=e.closest(".js-setup-creditcard");a.classList.toggle("is-vat-country",o!=null);const c=a.querySelector(".js-vat-help-text");c.textContent=o?`(${o})`:"";const r=a.querySelector(".js-select-state");if(a.classList.toggle("is-international",t!==R&&t!==$),r.required=t===R,t!==R&&(r.value=""),t===$){const C=a.querySelector(".js-select-province"),w=a.querySelector(".js-region-label");w.textContent="Province",C.disabled=!1,C.required=!0,r.classList.add("d-none"),C.classList.remove("d-none")}else{const C=a.querySelector(".js-select-province"),w=a.querySelector(".js-region-label");w.textContent="State",C.disabled=!0,C.required=!1,C.value="",r.classList.remove("d-none"),C.classList.add("d-none")}const S=a.querySelector(".js-postal-code-field"),v=j.indexOf(t||"")>=0;a.classList.toggle("no-postcodes",v),S.required=!v,v&&(S.value="")}s(B,"setupCountryFields"),(0,E.N7)(".js-select-country",{constructor:HTMLSelectElement,initialize(e){B(e),e.form&&(0,b.f)(e.form,"change"),e.addEventListener("change",function(){B(e)})}}),(0,b.on)("change",".js-payment-methods .js-payment-method",H),(0,b.on)("click",".js-payment-method-href",H);function H(e){if(!(e.currentTarget instanceof Element))return;const t=e.currentTarget.closest(".js-payment-methods"),n=e.currentTarget.getAttribute("data-selected-tab"),o=t.querySelectorAll(".js-selected-payment-method");for(const c of o)c.classList.remove("active");t.querySelector(`.${n}`).classList.add("active");const a=t.closest(".js-billing-section");if(a)if(n==="pay-with-paypal"){a.classList.add("PaymentMethod--paypal"),a.classList.remove("PaymentMethod--creditcard"),a.classList.remove("PaymentMethod--creditcard-added");const c=document.querySelector(".js-zuora-billing-info"),r=document.querySelector(".js-zuora-payment-page");c.classList.add("d-none"),r.classList.remove("d-none")}else n==="pay-by-credit-card"&&(a.classList.remove("PaymentMethod--paypal"),a.classList.add("PaymentMethod--creditcard"))}s(H,"handlePaymentMethodChange"),(0,E.N7)(".js-selected-payment-method:not(.active)",{add(e){e.classList.add("has-removed-contents")},remove(e){e.classList.remove("has-removed-contents")}}),(0,E.N7)(".js-billing-payment-methods",function(e){e.classList.remove("disabled")});const D=["paypal-loading","paypal-logged-in","paypal-logged-out","paypal-down"];function W(e,t,n){const{onSuccess:o}=n;return new Promise(a=>T().setup(e,t,Object.assign({},n,{onSuccess:()=>{o(),a()}})))}s(W,"braintreeSetup");function k(e,t){e.classList.remove(...D),D.indexOf(t)>=0&&e.classList.add(t)}s(k,"setPaypalState");async function u(e){const t=e.getAttribute("data-token");if(t)return t;const n=await fetch("/account/billing/client_token",{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!n.ok)throw new Error("Response is not OK");return await n.text()}s(u,"getClientToken");async function i(e){const t=e.closest(".js-payment-methods");if(!t.classList.contains("paypal-loading")&&!t.classList.contains("paypal-logged-in")){e.innerHTML="",k(t,"paypal-loading");try{const n=await u(t);t.hasAttribute("data-token")||t.setAttribute("data-token",n);const o=e.getAttribute("data-nonce-field"),a=t.querySelector(o);await W(n,"paypal",{container:e,displayName:"GitHub",paymentMethodNonceInputField:a,enableCORS:!0,onSuccess(){k(t,"paypal-logged-in");const S=document.querySelector(".js-awaiting-payment");S&&S.getAttribute("data-toggle-plan-upgrade-visibility")==="true"&&S.toggleAttribute("hidden")},onReady(){k(t,"paypal-logged-out")}});const c=document.querySelector("#bt-pp-cancel");c.setAttribute("type","button");const r=document.querySelector(".js-paypal-cancel-icon").cloneNode(!0);r instanceof Element&&r.classList.remove("d-none"),c.appendChild(r)}catch(n){throw k(t,"paypal-down"),n}}}s(i,"setupBraintreePaypal"),(0,b.on)("click","#bt-pp-cancel",function(e){const t=e.currentTarget.closest(".js-payment-methods");k(t,"paypal-logged-out");const n=e.currentTarget.closest(".js-paypal-container");i(n)}),(0,E.N7)(".js-paypal-container",{add(e){e.closest(".active")!=null&&i(e)}});var l=d(66899),m=d(41307),y=d(53412);(0,E.N7)("input.js-plan-choice:checked",{constructor:HTMLInputElement,add(e){const t=e.value==="free";for(const r of document.querySelectorAll(".js-plan-choice-label"))r.classList.toggle("open",r===e);const n=e.closest(".js-plan-choice-label");if(n){const r=n.querySelector(".js-addon-purchase-field");r instanceof HTMLInputElement&&(0,l.dY)(r),e.checked&&n.classList.add("open")}const o=e.classList.contains("js-data-ghe-cloud-trial")&&e.value==="business_plus",a=t||o;for(const r of document.querySelectorAll(".js-billing-section"))r.classList.toggle("has-removed-contents",a);if(t){const r=document.querySelector(".js-contact-us");r!=null&&r.classList.add("d-none");const S=document.querySelector(".js-purchase-button");S!=null&&S.removeAttribute("disabled")}if((document.querySelector("input.js-enterprise-choice[value=server]:checked")&&e.value==="business_plus")===!0){const r=document.querySelector(".SignUpContinueActions");r!=null&&r.classList.add("has-removed-contents")}}}),(0,b.on)("change","input.js-duration-change",async function({currentTarget:e}){const t=document.querySelector(".js-upgrade-plan-change:checked"),n=document.querySelector(".js-transform-user");let o=`?plan_duration=${e.value}`;if(n&&(o=`${o}&transform_user=1`),t instanceof HTMLInputElement&&(o=`${o}&new_plan=${t.value}`),(0,y.x)()){const{visit:a}=await d.e("vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js").then(d.bind(d,74395));a(o)}else{const a=document.querySelector("#js-pjax-container");(0,m.ZP)({url:o,container:a})}}),(0,b.on)("change","input.js-upgrade-plan-change",async function({currentTarget:e}){const t=document.querySelector(".js-transform-user");let n=`?new_plan=${e.value}`;if(t&&(n=`${n}&transform_user=1`),(0,y.x)()){const{visit:o}=await d.e("vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js").then(d.bind(d,74395));o(n)}else{const o=document.querySelector("#js-pjax-container");(0,m.ZP)({url:n,container:o})}}),(0,b.on)("change","input.js-org-duration-change",async function({currentTarget:e}){const t=new URL(document.location.href,window.location.origin).searchParams;if(document.querySelectorAll(".js-experiment-seats").length>0){const o=document.querySelector("#seats");t.set("plan_duration",e.value),t.set("memberships",o.value)}else{const o=document.querySelector(".js-upgrade-org-plan-change:checked"),a=document.querySelector(".js-account-name");t.set("plan",o.value),t.set("plan_duration",e.value),t.set("org",a.value)}e.hasAttribute("data-show-team-as-link")&&t.set("source","trial_upgrade");const n=`?${t.toString()}`;if((0,y.x)()){const{visit:o}=await d.e("vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js").then(d.bind(d,74395));o(n)}else{const o=document.querySelector("#js-pjax-container");(0,m.ZP)({url:n,container:o})}}),(0,b.on)("change","input.js-upgrade-org-plan-change",async function({currentTarget:e}){const t=document.querySelector(".js-account-name"),n=new URL(document.location.href,window.location.origin).searchParams;n.set("plan",e.value),n.set("org",t.value);const o=`?${n.toString()}`;if((0,y.x)()){const{visit:a}=await d.e("vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js").then(d.bind(d,74395));a(o)}else{const a=document.querySelector("#js-pjax-container");(0,m.ZP)({url:o,container:a})}});var g=d(46263),L=d(29946);let F=null,z="month";async function x(e){const t=e.value,n=new URL(e.getAttribute("data-url"),window.location.origin),o=new URLSearchParams(n.search.slice(1));o.append("seats",t),document.querySelectorAll(".js-experiment-seats").length>0&&(z=document.querySelector(".js-org-duration-change:checked")?.value||"month",o.append("experiment","true"),o.append("plan_duration",z)),n.search=o.toString(),F?.abort();const{signal:a}=F=new AbortController;let c=null;try{const S=await fetch(n.toString(),{signal:a,headers:{Accept:"application/json"}});if(!S.ok)return;c=await S.json()}catch{}if(a.aborted||!c)return;const r=c.selectors;for(const S in r)for(const v of document.querySelectorAll(S))v.innerHTML=r[S]}s(x,"updateTotals"),(0,E.N7)(".js-trial-upgrade-seats",{constructor:HTMLInputElement,add(e){x(e),(0,l.oq)(e,function(){x(e)})}});let K=1,U=Number.MAX_SAFE_INTEGER;const X=300;(async function(){await q.x;const e=document.getElementById("seats"),t=document.getElementById("plan_duration_month");t&&(z=t.checked?"month":"year"),e&&(K=Number(e.getAttribute("data-minimum")),U=Number(e.getAttribute("data-maximum")),O(e),x(e))})(),document.addEventListener("pjax:end",function(){const e=document.getElementById("seats");O(e)}),document.addEventListener(L.QE.SUCCESS,function(){const e=document.getElementById("seats");O(e)}),(0,b.on)("click","#increase-seats-number",function(){const e=document.getElementById("seats");if(!e||e.disabled)return;const t=Number(e.value)+1;e.value=t.toString(),O(e),x(e)}),(0,b.on)("click","#decrease-seats-number",function(){const e=document.getElementById("seats");if(!e||e.disabled)return;const t=Number(e.value)-1;e.value=t.toString(),O(e),x(e)});const Z=(0,g.D)(e=>{const t=e.target;!t||t.disabled||(O(t),x(t))},200);function O(e){if(!e||e.disabled)return;const t=Number(e.value),n=document.getElementById("plan_duration_year");!t||t<K?(e.value=K.toString(),document.querySelector(".js-minimum-seats").hidden=!1):n.checked&&n.classList.contains("js-discount-allowed")&&t>X?(e.value=X.toString(),document.querySelector(".js-maximum-seats").hidden=!1):t>U?(e.value=U.toString(),document.querySelector(".js-maximum-seats").hidden=!1):(document.querySelector(".js-minimum-seats").hidden=!0,document.querySelector(".js-maximum-seats").hidden=!0)}s(O,"limitSeats"),(0,E.N7)("#seats",e=>{e.addEventListener("keyup",Z)});var G=d(45975),ee=d(92003),te=d(53692);async function ne(e){const t=e.getAttribute("data-url"),n=e.getAttribute("data-organization-id"),o=e.getAttribute("data-business-id"),a=e.getAttribute("data-signature-view-context"),c=e.getAttribute("data-manual-payment"),r=e.getAttribute("data-terms-of-service"),S=e.getAttribute("data-target"),v=new URLSearchParams;n&&v.append("organization_id",n),a&&v.append("view_context",a),o&&v.append("business_id",o),c&&v.append("manual_payment",c),r&&v.append("terms_of_service",r),S&&v.append("target",S);const C=await fetch(`${t}?${v.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!C.ok){const N=e.getAttribute("data-general-signature-error-message")||"";J(N);const Y=new Error,le=C.statusText?` ${C.statusText}`:"";throw Y.message=`HTTP ${C.status}${le}`,Y}const w=await C.json();if(e.classList.contains("js-zuora-payment-page")){if(w.error){J(w.error);return}const N=e.getAttribute("data-id");Q(e,w,{creditCardHolderName:N},se)}else Q(e,w,{creditCardHolderName:"GitHub Organization"},ie)}s(ne,"setupZuoraHostedPaymentsPage");async function oe(e,t,n){const o=new URLSearchParams;o.append("payment_method_id",e.refId),t&&o.append("organization_id",t);const a=await fetch(`/settings/billing/payment_method?${o.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!a.ok){const c=new Error,r=a.statusText?` ${a.statusText}`:"";throw c.message=`HTTP ${a.status}${r}`,c}n(await a.json())}s(oe,"fetchPaymentMethodDetails");function ae(e){return(t,n,o)=>{let a=o;const c=JSON.parse(e.getAttribute("data-error-messages"));switch(t){case"error":(0,te.Fk)(e),a.match(/Attempt_Exceed_Limitation/)?.input?a=c.attempts_exceeded_limit_error:a=c.processor_declined_error;break}G.Z.sendErrorMessageToHpm(t,a)}}s(ae,"errorMessageCallback");async function V(e,t,n=5,o=1e3){if(n===0)throw new Error("Max retries exhausted");let a=`/settings/billing/bill_pay/${e}`;if(t){const r=new URLSearchParams;r.append("organization_id",t),a=`${a}?${r.toString()}`}const c=await fetch(a,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(c.status===200)return c;if(c.status===202)return await new Promise(r=>setTimeout(r,o)),V(e,t,n-1,o*1.5);throw new Error(`Unexpected ${c.status} response from poll endpoint`)}s(V,"pollPayment");function re(e,t){return async n=>{if(t(n),n.success==="true"){const o=document.querySelector(".js-payment-method-form");if(o){if(!(o instanceof HTMLFormElement))return;const a=e.getAttribute("data-redirect-to");if(a)if(n.AuthorizeResult==="Approved"){const c=e.getAttribute("data-organization-id"),r=document.querySelector(".js-payment-verification-spinner"),S=document.querySelector(".js-payment-verification-success"),v=document.querySelector(".js-payment-method-section-wrapper"),C=document.querySelector(".js-payment-still-processing");try{v.hidden=!0,r.hidden=!1,await V(n.PaymentId,c),r.hidden=!0,S.hidden=!1}catch{r.hidden=!0,C.hidden=!1,await new Promise(N=>setTimeout(N,3e3))}await new Promise(w=>setTimeout(w,150)),window.location.replace(a)}else(0,ee.eK)(new Error(`Unknown AuthorizationResult ${n.AuthorizeResult}`)),window.location.replace(a);else o.submit()}else{const a=e.getAttribute("data-organization-id");oe(n,a,c=>{const r=document.querySelector(".js-zuora-billing-info"),S=r.querySelector(".js-new-card-type"),v=r.querySelector(".js-new-card-number"),C=c.masked_number.replace(/\*/g,""),w=e.closest(".js-billing-section"),N=document.querySelector(".js-awaiting-payment");S.textContent=c.card_type,v.textContent=C,e.classList.add("d-none"),r.classList.remove("d-none"),N&&N.toggleAttribute("hidden"),w.classList.remove("PaymentMethod--creditcard"),w.classList.add("PaymentMethod--creditcard-added")})}}}}s(re,"zuoraSuccessCallback");function Q(e,t,n,o){const a=Object.assign({},t.prepopulate,n);delete t.prepopulate,G.Z.renderWithErrorHandler(t,a,re(e,o),ae(e))}s(Q,"loadZuora");function se(e){if(e.success==="true"){const t=document.querySelector(".js-zuora-billing-info"),n=t.querySelector(".js-zuora-payment-method-id"),o=t.querySelector(".js-zuora-select-country"),a=t.querySelector(".js-zuora-select-region"),c=t.querySelector(".js-zuora-select-postal-code");n.value=e.refId,o.value=o.value||e.creditCardCountry,a.value=a.value||e.creditCardState,c.value=c.value||e.creditCardPostalCode}}s(se,"paymentMethodPageCallback");function ie(e){const t=new URLSearchParams;t.append("success",e.success),t.append("response_from",e.responseFrom),e.success?t.append("ref_id",e.refId):(t.append("error_code",e.errorCode),t.append("error_message",e.errorMessage));const n=`pay?${t.toString()}`;window.location.replace(n)}s(ie,"invoicePaymentCallback");function ce(){const e=document.getElementById("z_hppm_iframe");e!=null&&(e.setAttribute("height","100%"),e.setAttribute("width","100%"),G.Z.post(e.id,"resize"))}s(ce,"resizeZuoraIframe");function J(e){const t=document.querySelector(".js-zuora-spinner");t&&(t.textContent=e)}s(J,"replaceSpinnerWithMessage"),(0,E.N7)("#zuora_payment",{constructor:HTMLElement,add(e){if(e.classList.contains("js-zuora-payment-page")){const n=document.querySelector(".js-zuora-spinner");n&&n.classList.remove("d-none"),e.style.opacity="0",G.Z.runAfterRender(()=>{n&&n.classList.add("d-none"),e.style.opacity="1",window.addEventListener("resize",(0,g.D)(ce,200))})}ne(e)}});var ue=d(54505)},54505:(_,I,d)=>{var h=d(59753),T=d(64463);const b="United States of America",E="Canada";(0,h.on)("click",".js-edit-user-personal-profile",M),(0,h.on)("click",".js-sponsors-cancel-billing-info",P),(0,h.on)("click",".js-view-user-personal-profile",A),(0,h.on)("click",".js-edit-paypal-method",p),(0,h.on)("click",".js-enter-new-card",f),(0,h.on)("click",".js-edit-payment-method-btn",j),(0,h.on)("click",".js-cancel-edit-payment-method-btn",R),(0,h.on)("click",".js-sponsors-cancel-edit-payment-method-btn",$),(0,h.on)("click",".js-add-billing-information-btn",H),(0,h.on)("click",".js-cancel-submit-personal-profile-btn",W),(0,h.on)("click",".js-dismiss-flash-message",k);function q(u){const i=u.options[u.selectedIndex]?.textContent,l=u.closest(".js-name-address-collection"),m=l.querySelector(".js-select-state"),y=l.querySelector(".js-name-address-state"),g=l.querySelector(".js-name-address-select-province"),L=document.getElementsByClassName("js-region-label");i===b?(m.required=!0,m.id="account_screening_profile_region",m.disabled=!1,m.hidden=!1):(m.disabled=!0,m.required=!1,m.value="",m.removeAttribute("id"),m.hidden=!0),i===E?(g.disabled=!1,g.required=!0,g.id="account_screening_profile_region",g.hidden=!1):(g.disabled=!0,g.required=!1,g.value="",g.removeAttribute("id"),g.hidden=!0),i===b||i===E?(y.disabled=!0,y.value="",y.removeAttribute("id"),y.hidden=!0,L[0].classList.add("required-asterisked")):(y.disabled=!1,y.id="account_screening_profile_region",y.hidden=!1,L[0].classList.remove("required-asterisked"))}s(q,"setupCountryFields"),(0,T.N7)(".js-name-address-select-country",{constructor:HTMLSelectElement,initialize(u){q(u),u.form&&(0,h.f)(u.form,"change"),u.addEventListener("change",function(){q(u)})}}),(0,T.N7)(".js-sponsors-handle-cancel-edit-payment .pay-by-credit-card .js-zuora-existing-card",{constructor:HTMLElement,add(){B(),document.querySelector(".payment-methods").classList.remove("js-sponsors-handle-cancel-edit-payment")}});function M(u){if(!(u.currentTarget instanceof Element))return;const i=document.querySelector(".js-edit-user-personal-profile-wrapper");i.hidden=!0;const l=document.querySelector(".js-name-address-collection-wrapper");l.hidden=!1;const m=document.querySelector(".js-user-personal-profile-summary");m.hidden=!0;const y=document.querySelector(".js-sponsors-cancel-billing-info");y&&(y.hidden=!1);const g=document.querySelector(".js-awaiting-payment");g&&(g.hasAttribute("hidden")||(g.hidden=!0));const L=document.querySelector(".js-sponsors-form");L&&(L.hidden=!0);const F=document.querySelector(".js-marketplace-form-wrapper");F&&(F.hidden=!0);const z=document.querySelector(".js-sdn-screening-error-wrapper");z&&(z.hidden=!0);const x=document.querySelector(".js-payment-methods-wrapper");x&&(x.hidden=!0);const K=document.querySelector(".js-coupons-form-wrapper");K&&(K.hidden=!0);const U=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");U&&!U.hidden&&U.click();const X=document.querySelector(".js-org-payment-method-wrapper");X&&(X.hidden=!0);const Z=document.querySelector(".js-billing-section.js-data-collection-org-signup");Z&&Z.classList.toggle("has-removed-contents")}s(M,"handleEditAccountScreeningProfile");function P(u){if(!(u.currentTarget instanceof Element))return;const i=document.querySelector(".js-sponsors-cancel-billing-info");i.hidden=!0;const l=document.querySelector(".js-name-address-collection-wrapper");l.hidden=!0;const m=document.querySelector(".js-user-personal-profile-summary");m.hidden=!1;const y=document.querySelector(".js-edit-user-personal-profile-wrapper");y.hidden=!1;const g=document.querySelector(".js-payment-methods-wrapper");g.hidden=!1;const L=document.querySelector(".js-sponsors-form");L&&(L.hidden=!1)}s(P,"handleSponsorsCancelBillingInfo");function A(){fetch("/account/user_profile_view?flow_from_page=SPONSORABLE",{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})}s(A,"handleViewAccountScreeningProfile");function p(u){if(!(u.currentTarget instanceof Element))return;const i=document.querySelector(".js-awaiting-payment");i&&(i.hidden=!0);const l=document.querySelector(".js-sponsors-form");l&&(l.hidden=!0);const m=document.querySelector(".js-marketplace-form-wrapper");m&&(m.hidden=!0);const y=document.querySelector(".js-payment-methods-radio");y.hidden=!1;const g=document.querySelector(".js-billing-pay-with");g&&(g.hidden=!1);const L=document.querySelector(".js-existing-paypal-summary");L.hidden=!0;const F=document.querySelector(".js-paypal-method-details");F.hidden=!1;const z=document.querySelector(".js-paypal-payment-method-form");z.hidden=!1}s(p,"handleEditPayPalPaymentMethod");function f(u){if(!(u.currentTarget instanceof Element))return;const i=document.querySelector(".js-awaiting-payment");i&&(i.hidden=!0);const l=document.querySelector(".js-sponsors-form");l&&(l.hidden=!0);const m=document.querySelector(".js-marketplace-form-wrapper");m&&(m.hidden=!0);const y=document.querySelector(".js-billing-pay-with");y&&(y.hidden=!1);const g=document.querySelector(".js-payment-methods-radio");g&&(g.hidden=!1);const L=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");L&&(L.hidden=!1)}s(f,"handleEditCreditCardPaymentMethod");function j(u){if(!(u.currentTarget instanceof Element))return;const i=document.querySelector(".js-update-billing-information-banner");if(!document.querySelector(".js-billing-information-summary"))i.hidden=!1,D();else{i.hidden=!0;const m=document.querySelector(".js-payment-summary-wrapper");m.hidden=!0;const y=document.querySelector(".js-payment-method-section-wrapper");y.hidden=!1;const g=document.querySelector(".js-edit-payment-method-btn");g.hidden=!0;const L=document.querySelector("#z_hppm_iframe");L!=null&&(L.setAttribute("height","100%"),L.setAttribute("width","100%")),window.dispatchEvent(new Event("resize"))}}s(j,"handleEditPaymentMethod");function R(u){if(!(u.currentTarget instanceof Element))return;const i=document.querySelector(".js-payment-summary-wrapper");i.hidden=!1;const l=document.querySelector(".js-payment-method-section-wrapper");l.hidden=!0;const m=document.querySelector(".js-edit-payment-method-btn");m.hidden=!1}s(R,"handleCancelEditPaymentMethod");function $(u){if(!(u.currentTarget instanceof Element))return;document.querySelector(".js-paypal-payment-method-form")==null?B():(document.querySelector(".payment-methods").classList.add("js-sponsors-handle-cancel-edit-payment"),document.querySelector("#pay-by-credit-card").click())}s($,"handleSponsorsCancelEditPaymentMethod");function B(){const u=document.querySelector(".js-billing-section");u.hidden=!0;const i=document.querySelector(".js-billing-pay-with");i.hidden=!0;const l=document.querySelector(".js-payment-methods-radio");l.hidden=!0;const m=document.querySelector(".js-sponsors-cancel-edit-payment-method-btn");m.hidden=!0;const y=document.querySelector(".js-sponsors-form");y&&(y.hidden=!1);const g=document.querySelector(".js-zuora-existing-card");g&&g.classList.remove("d-none")}s(B,"sponsorsHidePaymentMethod");function H(u){u.currentTarget instanceof Element&&D()}s(H,"handleAddBillingInformation");function D(){const u=document.querySelector(".js-billing-information-summary-wrapper");u.hidden=!0;const i=document.querySelector(".js-name-address-collection-wrapper");i.hidden=!1;const l=document.querySelector(".js-add-billing-information-btn");l.hidden=!0;const m=document.querySelector(".js-no-billing-information-message");m&&(m.hidden=!0);const y=document.querySelector(".js-org-payment-method-wrapper");y&&(y.hidden=!0)}s(D,"addBillingInformationHelper");function W(u){if(!(u.currentTarget instanceof Element))return;const i=document.querySelector(".js-billing-information-summary-wrapper");i&&(i.hidden=!1);const l=document.querySelector(".js-name-address-collection-wrapper");l&&(l.hidden=!0);const m=document.querySelector(".js-add-billing-information-btn");m&&(m.hidden=!1);const y=document.querySelector(".js-no-billing-information-message");y&&(y.hidden=!1)}s(W,"handleCancelAddBillingInformation");function k(u){if(!(u.currentTarget instanceof Element))return;const i=document.querySelector(".js-update-billing-information-banner");i.hidden=!0}s(k,"handleDismissMessage")},92003:(_,I,d)=>{d.d(I,{aJ:()=>W,cI:()=>B,eK:()=>f});var h=d(29946),T=d(82918),b=d(45341),E=d(28382),q=d(47930),M=d(53412);let P=!1,A=0;const p=Date.now();function f(i,l={}){i&&i.name!=="AbortError"&&j($(R(i),l))}s(f,"reportError");async function j(i){if(!u())return;const l=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(!!l){if(D(i.error.stacktrace)){P=!0;return}A++;try{await fetch(l,{method:"post",body:JSON.stringify(i)})}catch{}}}s(j,"report");function R(i){return{type:i.name,value:i.message,stacktrace:B(i)}}s(R,"formatError");function $(i,l={}){return Object.assign({error:i,sanitizedUrl:(0,q.S)()||window.location.href,readyState:document.readyState,referrer:(0,h.wP)(),timeSinceLoad:Math.round(Date.now()-p),user:W()||void 0,turbo:(0,M.x)()},l)}s($,"errorContext");function B(i){return(0,E.Q)(i.stack||"").map(l=>({filename:l.file||"",function:String(l.methodName),lineno:(l.lineNumber||0).toString(),colno:(l.column||0).toString()}))}s(B,"stacktrace");const H=/(chrome|moz|safari)-extension:\/\//;function D(i){return i.some(l=>H.test(l.filename)||H.test(l.function))}s(D,"isExtensionError");function W(){const i=document.head?.querySelector('meta[name="user-login"]')?.content;return i||`anonymous-${(0,T.b)()}`}s(W,"pageUser");let k=!1;window.addEventListener("pageshow",()=>k=!1),window.addEventListener("pagehide",()=>k=!0);function u(){return!k&&!P&&A<10&&(0,b.Gb)()}s(u,"reportable"),typeof BroadcastChannel=="function"&&new BroadcastChannel("shared-worker-error").addEventListener("message",l=>{f(l.data.error)})},53692:(_,I,d)=>{d.d(I,{$S:()=>T,Fk:()=>b,sz:()=>E});var h=d(45922);function T(q,M,P){const A={hydroEventPayload:q,hydroEventHmac:M,visitorPayload:"",visitorHmac:"",hydroClientContext:P},p=document.querySelector("meta[name=visitor-payload]");p instanceof HTMLMetaElement&&(A.visitorPayload=p.content);const f=document.querySelector("meta[name=visitor-hmac]")||"";f instanceof HTMLMetaElement&&(A.visitorHmac=f.content),(0,h.b)(A,!0)}s(T,"sendData");function b(q){const M=q.getAttribute("data-hydro-view")||"",P=q.getAttribute("data-hydro-view-hmac")||"",A=q.getAttribute("data-hydro-client-context")||"";T(M,P,A)}s(b,"trackView");function E(q){const M=q.getAttribute("data-hydro-click-payload")||"",P=q.getAttribute("data-hydro-click-hmac")||"",A=q.getAttribute("data-hydro-client-context")||"";T(M,P,A)}s(E,"sendHydroEvent")},66899:(_,I,d)=>{d.d(I,{dY:()=>A,iU:()=>P,oq:()=>M});const h=new WeakMap;function T(p){const f=h.get(p);!f||(f.timer!=null&&clearTimeout(f.timer),f.timer=window.setTimeout(()=>{f.timer!=null&&(f.timer=null),f.inputed=!1,f.listener.call(null,p)},f.wait))}s(T,"schedule");function b(p){const f=p.currentTarget,j=h.get(f);!j||(j.keypressed=!0,j.timer!=null&&clearTimeout(j.timer))}s(b,"onKeydownInput");function E(p){const f=p.currentTarget,j=h.get(f);!j||(j.keypressed=!1,j.inputed&&T(f))}s(E,"onKeyupInput");function q(p){const f=p.currentTarget,j=h.get(f);!j||(j.inputed=!0,j.keypressed||T(f))}s(q,"onInputInput");function M(p,f,j={wait:null}){h.set(p,{keypressed:!1,inputed:!1,timer:void 0,listener:f,wait:j.wait!=null?j.wait:100}),p.addEventListener("keydown",b),p.addEventListener("keyup",E),p.addEventListener("input",q)}s(M,"addThrottledInputEventListener");function P(p,f){p.removeEventListener("keydown",b),p.removeEventListener("keyup",E),p.removeEventListener("input",q);const j=h.get(p);j&&(j.timer!=null&&j.listener===f&&clearTimeout(j.timer),h.delete(p))}s(P,"removeThrottledInputEventListener");function A(p){const f=h.get(p);f&&f.listener.call(null,p)}s(A,"dispatchThrottledInputEvent")}},_=>{var I=s(h=>_(_.s=h),"__webpack_exec__");_.O(0,["vendors-node_modules_selector-observer_dist_index_esm_js","vendors-node_modules_delegated-events_dist_index_js-node_modules_stacktrace-parser_dist_stack-74aed8","vendors-node_modules_github_braintree-encryption_target_braintree-1_3_10_js-node_modules_gith-5f1d58","app_assets_modules_github_behaviors_pjax_ts"],()=>I(23551));var d=_.O()}]);})();

//# sourceMappingURL=billing-03b9a3758f51.js.map